# 2. 株価データ自動取得 要件定義

## 2.1. 目的
このドキュメントは、外部APIを利用した株価データの自動取得機能の仕様を定義する。
手動でのデータ入力を不要にし、常に最新の市場データに基づいた計算を可能にすることを目的とする。

## 2.2. 主要機能
- 指定された銘柄コード（ティッカーシンボル）に基づき、株価（基準価額）データを取得する機能。
- 計算に必要な期間の時系列データ（日足）を取得する機能。
- APIからのデータ取得失敗時に、適切なエラーハンドリングを行う機能。

## 2.3. 利用するAPI（案）
- **yfinance**: Yahoo Financeからデータを取得するPythonライブラリ。
  - **メリット**: 無料で利用でき、導入が容易。日本株、外国株、投資信託、ETFなど幅広い金融商品に対応。
  - **デメリット**: 非公式APIのため、将来的に利用できなくなるリスクがある。

## 2.4. 対応資産とティッカーシンボル
`yfinance`ライブラリはYahoo Financeのティッカーシンボルを利用するため、以下の多様な資産に対応可能。

- **日本株**: `7203.T` (トヨタ自動車) のように、証券コードの末尾に`.T`を付与。
- **外国株（米国株など）**: `AAPL` (アップル), `GOOGL` (アルファベット)
- **投資信託 / ETF**: `VTSAX` (バンガード・トータル・ストック・マーケット・インデックス・ファンド), `SPY` (SPDR S&P 500 ETF)

## 2.5. データ要件
- **取得するデータ**:
  - 終値（Adjusted Closeを優先）
- **取得期間**:
  - ボラティリティ計算に必要な期間（例: 過去60営業日分）

## 2.6. 考慮事項
- APIのレートリミット（短時間での大量リクエスト）への対応。
- ネットワーク接続がない場合の挙動。
- 取得データのキャッシュ（短時間に同じデータを再取得しないための仕組み）。
