# 【AAVC発展戦略】ドルコスト平均法・一括投資との長期シミュレーション比較分析【第3回】

## はじめに

こんにちは！ドルコスト平均法を超えるアルゴリズムの検証シリーズ第3回です！

これまでの記事では、AAVCの基本的な考え方や、特定の相場での有効性を見てきました。しかし、AAVCには基準価格の決め方がこれからの課題でした。
（第一回と第二回を読んでいない方は、リンクがページ下にありますのでそちらからご確認ください）

そこで今回は基準価格の決定方法を四つ考えたので、それらを王道である「ドルコスト平均法（DCA）」や「一括投資（Buy & Hold）」と比較します。
（ただし、一括投資は今既に預金が大量にある人しか実行できないので参考程度に見ます）

単一のデータに頼らないために**長期のローリングシミュレーション**という形でシミュレーションを行います。


## 今回登場する戦略たち

今回のシミュレーションに登場する各戦略のロジックと、シミュレーションで利用した主要なパラメータを詳しく見ていきましょう。

### DCA (ドルコスト平均法)
毎月決まった額を淡々と投資し続ける、基本となる戦略です。シンプルかつ強力な王道。
*   **主要パラメータ**: `base_amount`（毎月の投資額）のみ。

### Buy & Hold (一括投資)
シミュレーション開始日に、期間中の総投資額（今回の場合はDCAの投資総額と同額）を一括で投じる戦略。ハイリスクハイリターン。
*   **主要パラメータ**: `initial_amount`（初期投資額）のみ。

### aavc_static (静的AAVC)
第2回の記事でも検証した、最も基本的なAAVC戦略です。シミュレーション開始時の価格を「基準価格」として固定し、それより価格が安いか高いかに応じて、投資額を機械的に増減させます。
*   **`asymmetric_coefficient`**: `2.0`
*   **`max_investment_multiplier`**: `3.0`

### aavc_dynamic (動的AAVC)
`aavc_static`の柔軟性を高めた進化版です。現在の株価が、その時点の「基準価格」の2倍（`ref_price_reset_threshold`）を超えた場合に、基準価格を「現在の株価 × 0.8」（`ref_price_reset_factor`）として更新します。これにより、急激な価格上昇トレンドにもある程度追従しようと試みます。
*   **`asymmetric_coefficient`**: `2.0`
*   **`max_investment_multiplier`**: `3.0`
*   **`ref_price_reset_threshold`**: `2.0`
*   **`ref_price_reset_factor`**: `0.8`

### aavc_ma (移動平均線 追従型AAVC)
長期的な市場トレンドを基準とする戦略です。過去200日間（`window_size`）の株価の平均値である「200日移動平均線」を基準価格とします。市場の大きな流れに沿って、割安・割高を判断するのが特徴です。移動平均線が短いとドルコスト平均法と似たような振る舞いをします。
*   **`asymmetric_coefficient`**: `2.0`
*   **`max_investment_multiplier`**: `3.0`
*   **`window_size`**: `200`日

### aavc_highest_reset (過去最高値 追従型AAVC)
常に「過去最高値」を監視し、それを基準とする戦略です。株価が過去最高値を更新すると、新しい基準価格を「更新された最高値 × 0.85」（`reset_factor`）に設定します。これにより、「最高値からの下落（押し目）」を効率的に狙うことを目的とします。最高値の時もある程度の積立は継続します。
*   **`asymmetric_coefficient`**: `2.0`
*   **`max_investment_multiplier`**: `3.0`
*   **`reset_factor`**: `0.85`

## 長期ローリングシミュレーションによる実力検証

今回の検証は、これまでよりもさらに厳格な「ローリングシミュレーション」という手法を用いています。これにより、特定の期間に左右されない、より客観的で信頼性の高い戦略評価を目指します。

### シミュレーションの前提条件

まずは、今回の検証がどのような前提で行われたかを詳しく見ていきましょう。

*   **対象銘柄**: **S&P 500 (^GSPC)**
    *   米国の主要500社で構成される、世界で最も代表的な株価指数です。
*   **分析対象データ**: **2000年1月 から 2025年1月 まで**
    *   ITバブル崩壊、リーマンショック、コロナショックなど、様々な市場環境を含んだ約25年間のデータを使用します。
*   **シミュレーション期間**: **10年間**
    *   1回のシミュレーションは10年間の月次投資で行われます。
*   **ローリング間隔**: **3ヶ月**
    *   この10年間のシミュレーション開始時期を3ヶ月ずつずらしながら、何度も繰り返し検証します。今回は2000年から2025年までで計60回でローリング（例: 「2000年1月〜2009年12月」、「2000年4月〜2010年3月」…といった具合）
    *   これにより、一時的な運に左右されない、戦略の普遍的な実力を測ることができます。
*   **投資額**: 月額 **$1,000** を基準とします。

これらの条件の下、各戦略がどのようなパフォーマンスを示したかを見ていきましょう。

### 結果1: 年率リターン（投資効率の指標）

まずは、各戦略の「儲ける力」、つまり投資した資金に対する年率リターンを見てみます。これは**投資の効率性**を示す指標と言えます。

| Strategy | mean | median | min | max | std |
|:---|---:|---:|---:|---:|---:|
| **aavc_static** | **7.59%** | **8.16%** | -0.44% | 13.75% | 3.55 |
| aavc_dynamic | 7.14% | 7.41% | -0.44% | 12.44% | 3.26 |
| buy_and_hold | 7.10% | 6.28% | -3.39% | 14.79% | 4.46 |
| aavc_highest_reset | 5.13% | 5.68% | -0.24% | 8.67% | 2.16 |
| aavc_ma | 4.77% | 5.01% | -0.66% | 8.09% | 2.16 |
| dca | 4.47% | 4.75% | -0.93% | 8.00% | 2.16 |

![リターン率の箱ひげ図](../charts/rolling_simulation_return_boxplot.png)


*   **投資効率のチャンピオンは `aavc_static`**: 平均リターン（mean）で**7.59%**と、全戦略の中でトップの成績を収めました。`aavc_dynamic`も僅差で続いており、AAVCの基本的なモデルが高い投資効率を持つことを示しています。
*   **ハイリスク・ハイリターンの `buy_and_hold`**: 最大リターン（max）は最も高いですが、最小リターン（min）は-3.39%と最も低く、リターンのばらつき（std）も最大です。典型的なハイリスク・ハイリターン戦略と言えます。
*   **安定志向のグループ**: `aavc_highest_reset`, `aavc_ma`, `dca`の3者は、リターンは中程度ですが、標準偏差が約2.16と低く、非常に安定したパフォーマンスを示しています。特に`aavc_highest_reset`は、このグループの中で最も高い平均リターンを達成しており、安定性とリターンのバランスに優れています。

### 結果2: 最終資産価値（総資産の増加量）

次に、投資家にとって最も重要な結果の一つである、最終的な資産価値を見てみましょう。

| Strategy | mean | median | min | max | std |
|:---|---:|---:|---:|---:|---:|
| **buy_and_hold** | **$255,668** | $220,521 | $85,025 | **$475,910** | **$96,925** |
| dca | $189,124 | $190,858 | $109,312 | $258,763 | $36,561 |
| aavc_ma | $173,935 | $174,703 | $115,585 | $236,550 | $28,055 |
| aavc_highest_reset | $149,224 | $138,140 | $86,537 | $236,935 | $38,603 |
| aavc_dynamic | $113,767 | $79,922 | $9,078 | $299,880 | $78,593 |
| aavc_static | $111,872 | $76,695 | $7,090 | $299,880 | $80,139 |

![最終資産価値の箱ひげ図](../charts/rolling_simulation_final_value_boxplot.png)

*   **資産価値の王者は `buy_and_hold`**: 平均資産価値、最大資産価値ともに`buy_and_hold`が圧倒的です。しかし、標準偏差が極めて大きく、最小値も低いことから、「大きなリスクを取った結果」であることが明確です。
*   **安定した資産形成の `dca`**: `buy_and_hold`に次ぐ平均資産価値を達成しながら、標準偏差はその約1/3に抑えられています。リスクとリターンのバランスが非常に良く、多くの投資家にとって優れたベンチマークであることが再確認できます。
*   **AAVC戦略の苦戦**: 年率リターンでトップだった`aavc_static`と`aavc_dynamic`は、最終資産価値では最下位グループに沈んでいます。他のAAVC戦略も、DCAや`buy_and_hold`には及ばない結果となりました。

## 考察：「投資効率」と「最終資産」は逆転する

この「年率リターンは高いのに、最終資産は少ない」という逆転現象は、AAVC戦略を理解する上で最も重要なポイントです。

答えは、やはり**「待機資金」**、つまり**投資されずに現金として眠っていたお金**の量にあります。

年率リターンで1位だった`aavc_static`は、最終資産では最下位でした。これは、`aavc_static`が「基準価格より安い」という条件を非常に厳格に適用したため、ほとんどの期間で投資機会を見送っていたことを意味します。投資した資金は非常に効率よくリターンを生みましたが、そもそも投資した額が少なすぎたため、総資産は増えなかったのです。

これは、AAVC戦略が**「タイミングを計る」戦略**であることの宿命とも言えます。最高のタイミングを狙うほど、投資機会は減り、多くの資金が遊んでしまうのです。

### 発想の転換：AAVC戦略の正しい使い方

では、AAVC戦略は使えないのでしょうか？いいえ、そんなことはないと考えます。

AAVC戦略が総投資額が少なくなる傾向にあるなら、対策はシンプルです。
**あらかじめDCAよりも基準投資額を多めに設定しておくのです。**

この調整を行うことで、AAVC戦略が持つ「高い投資効率」や「優れた下落耐性」というメリットを活かしながら、DCAに匹敵する、あるいはそれ以上の最終資産価値を目指すことが可能になるのではないでしょうか？

## まとめ：スタイルに合う戦略

今回の包括的な比較分析から、各戦略のプロファイルが明確になりました。

*   **Buy & Hold (一括投資)**
    - **長所**: 長期的な上昇相場でのリターンが最大。
    - **短所**: リスクが極めて高く、暴落時のダメージも最大。
    - **向いている人**: 強い信念を持ち、数十年の超長期で大きなリスクを取れる投資家。

*   **DCA (ドルコスト平均法)**
    - **長所**: リスクとリターンのバランスが絶妙。精神的に楽で、安定した資産形成が期待できる。
    - **短所**: ベストなパフォーマンスではないが、常に平均以上の結果を出す。
    - **向いている人**: ほぼ全ての投資家にとって、コアとなるべき王道戦略。

*   **aavc_static / aavc_dynamic (効率追求型)**
    - **長所**: 投資効率（年率リターン）が全戦略中トップクラス。
    - **短所**: 投資機会が少なく、デフォルトでは最終資産が増えにくい。
    - **向いている人**: 投資額の調整などを積極的に行い、投資の「質」を極めたい上級者。

*   **aavc_highest_reset / aavc_ma (安定志向型)**
    - **長所**: DCA並みの安定性を持ちながら、より高いリターン率と下落耐性を持つ。
    - **短所**: DCAよりは最終資産が少なくなる傾向がある。
    - **向いている人**: DCAの安定感は欲しいが、もう少しだけリターンを上乗せし、下落リスクを抑えたい投資家。

個人的には、aavc_highest_resetが安定しているように見えるのでパラメータと基準の投資額を調整して進めていこうかなと思っています。
現状の課題は待機資金がどれぐらいかが測れていないことです。また余剰資金をどれだけ用意しておけば大暴落でもこの投資方法を継続できるかもシミュレーションしなければいけないと思っています。

ではまた。

**過去の記事**
- [第1回: ドルコスト平均法に勝るアルゴリズムのアイデア](https://qiita.com/rikutoyamada01/items/d5e9c00166b1a68f7856)
- [第2回: AAVC・DCA・一括投資の3つの相場での実力検証](https://qiita.com/rikutoyamada01/items/3942c3a26e3f4e6b7b5a)

**ProjectのGithub**
本プロジェクトはオープンソースです。改善のアイデアやコントリビュートは大歓迎です！
（ちょっと散らかってます。）
https://github.com/rikutoyamada01/AAVC_calculate_tool

---

*免責事項: 本記事は情報提供を目的としたものであり、特定の投資を推奨するものではありません。投資の最終的な判断は、ご自身の責任でお願いいたします。*
